<div>
<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>IA Cegonha Evolutiva 9.0</title>
<style>
body { margin: 0; background-color: #f0f8ff; font-family: Arial; display: flex; flex-direction: column; align-items: center; }
#container { position: relative; width: 100%; height: 50vh; border: 1px solid #ccc; margin-top: 20px; overflow: hidden; }
#input-container, #super-input-container { margin-top: 20px; text-align: center; width: 90%; max-width: 700px; }
#user-input, #super-user-input { padding: 10px; width: 70%; border-radius: 8px; font-size: 16px; }
#ask-button, #super-ask-button { padding: 10px 20px; margin-left: 10px; font-size: 16px; }
#response, #super-response { margin-top: 20px; width: 100%; font-size: 18px; color: #333; padding: 15px; background: #ffffffd0; border-radius: 10px; min-height: 80px; }
canvas { border: 1px solid #999; background: #f9f9ff; width: 100%; height: 100%; }
#audio-controls { margin-top: 10px; display:flex; gap:10px; align-items:center; justify-content:center; }
#stork-response-container { text-align:center; margin-top:10px; }
.flowers { font-size: 24px; line-height: 1.6; }
</style>
</head>
<body>

<h1>IA Cegonha Evolutiva 9.0</h1>
<div style="position: relative; width: 100%; text-align: center; margin: 10px 0; font-family: 'Georgia', serif;">
  <div style="font-size: 14px; color: #555; margin-bottom: 6px;">
    Cegonha IA â€” a arte, a espiritualidade, a poesia e o amor juntos na alma
  </div>
  <div class="flowers">ğŸŒ¸ğŸŒ¼ğŸŒºğŸŒ»ğŸŒ¹ğŸŒ· \\
          \\
           ))   .-.
          ((   (o_o)
           ))   | |\
          ((    | | \
  </div>
</div>

<div id="container">
  <canvas id="brainCanvas"></canvas>
  <div class="flowers" aria-hidden="true">ğŸŒ¸ğŸŒ¼ğŸŒºğŸŒ»ğŸŒ¹ğŸŒ· \\
          \\
           ))   .-.
          ((   (o_o)
           ))   | |\
          ((    | | \
  </div>
</div>

<div id="input-container">
  <input id="user-input" type="text" placeholder="Escreva algo..." />
  <button id="ask-button">Perguntar</button>
  <div id="response"></div>
  <div id="stork-response-container">
    <p>Raciocinio da Cegonha! Clica em mim.<br />
      <button id="stork-response" style="cursor:pointer">ğŸŒ¸ğŸŒ¼ğŸŒºğŸŒ»ğŸŒ¹ğŸŒ· \\
          \\
           ))   .-.
          ((   (o_o)
           ))   | |\
          ((    | | \
      </button>
    </p>
  </div>
  <div id="audio-controls">
    <button id="play-audio">â–¶ï¸ Iniciar MÃºsica</button>
    <button id="pause-audio">â¸ï¸ Parar MÃºsica</button>
    <label for="volume-control">ğŸ”Š Volume</label>
    <input type="range" id="volume-control" min="0" max="1" step="0.01" value="0.5" />
  </div>
</div>

<!-- Novo input SUPER raciocÃ­nio -->
<div id="super-input-container">
  <input id="super-user-input" type="text" placeholder="Pergunta universal..." />
  <button id="super-ask-button">Perguntar Ã  Cegonha</button>
  <div id="super-response"></div>
</div>

<audio id="stork-audio" loop preload="metadata">
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
  Seu navegador nÃ£o suporta Ã¡udio.
</audio>

<script>
// ==========================
// ELEMENTOS
// ==========================
const canvas = document.getElementById("brainCanvas");
const ctx = canvas.getContext("2d");
const userInput = document.getElementById("user-input");
const askButton = document.getElementById("ask-button");
const responseDiv = document.getElementById("response");
const container = document.getElementById("container");
canvas.width = container.clientWidth;
canvas.height = container.clientHeight;

const audio = document.getElementById("stork-audio");
document.getElementById("play-audio").addEventListener("click", () => audio.play());
document.getElementById("pause-audio").addEventListener("click", () => { audio.pause(); audio.currentTime = 0; });
document.getElementById("volume-control").addEventListener("input", (e) => { audio.volume = e.target.value; });

let lastQuestion = "";
let memory = [];

// ==========================
// DADOS ORIGINAIS
// ==========================
const energyColors = ["dourado","azul celeste","violeta mÃ­stico","verde cura","prateado lunar","rosa suave","laranja criativo","turquesa espiritual","Ã­ndigo profundo","vermelho ancestral"];
const archetypes = ["A CrianÃ§a Sagrada","O Curandeiro Interior","A Luz Oculta","O GuardiÃ£o da Porta","A Voz Silenciosa","O Sonhador Desperto","O CoraÃ§Ã£o Antigo","A Semente Estelar"];
const symbolicVisions = ["um lago espelhado com respostas escondidas","uma chama pequena mas persistente no peito","um corredor entre luz e sombra","uma ponte suspensa entre duas nuvens antigas","um jardim onde emoÃ§Ãµes crescem como flores","um rio que muda de cor quando pensa","uma estrela a piscar no ritmo do seu coraÃ§Ã£o"];
const narrativeLines = ["Era uma vez, nas alturas onde o vento guarda segredos, uma pergunta despertou asas de luzâ€¦","Recordo-me de uma manhÃ£ celestial em que uma alma curiosa fez algo parecido ao que perguntaste agoraâ€¦","HÃ¡ muito tempo, nas primeiras nuvens do amanhecer espiritual, ouvi um eco parecido ao da tua perguntaâ€¦","Numa viagem entre mundos, encontrei um brilho semelhante ao que existe nas tuas palavrasâ€¦"];
const stopwords = ["a","o","as","os","um","uma","de","da","do","das","dos","em","no","na","nos","nas","ao","Ã ","hÃ¡","faz","verso","um","uma","sobre","para","por","e","ou","se","que"];

// ==========================
// EMOÃ‡Ã•ES
// ==========================
function detectEmotion(text){
  const lower = text.toLowerCase();
  if(lower.includes("medo")||lower.includes("ansioso")||lower.includes("preocup")) return "uma leve inquietaÃ§Ã£o no seu coraÃ§Ã£o";
  if(lower.includes("feliz")||lower.includes("bom")||lower.includes("alegre")) return "uma luz quente e alegre nas suas palavras";
  if(lower.includes("triste")||lower.includes("dor")||lower.includes("perdido")) return "uma sombra suave, como quem busca conforto";
  return "uma energia curiosa a querer entender mais";
}

// ==========================
// BRAIN & MEMÃ“RIA
// ==========================
let cegonhaBrain = { words:{}, concepts:{}, links:[], maturity:0, evolutionLog:[] };
if(localStorage.getItem("cegonhaBrain")){ try{ cegonhaBrain = JSON.parse(localStorage.getItem("cegonhaBrain")); }catch(e){} }

let wordVerses = JSON.parse(localStorage.getItem("wordVersesMemory")) || {
  "benfica":["Nos campos do nosso coraÃ§Ã£o, o Benfica brilha, com a paixÃ£o que nunca se esvazia.","Na vitÃ³ria ou na dor, o Benfica Ã© amor, sempre a brilhar na nossa memÃ³ria."],
  "amor":["O amor Ã© a luz que ilumina o caminho, em cada passo, um carinho.","Como flores que brotam no verÃ£o, o amor cresce no coraÃ§Ã£o."],
  "esperanÃ§a":["A esperanÃ§a Ã© um sol que nunca se apaga, mesmo nas noites mais escuras, ela se propaga."]
};
function saveVerseMemory(){ localStorage.setItem("wordVersesMemory", JSON.stringify(wordVerses)); }

function readEnergy(q){
  return {
    color: energyColors[Math.floor(Math.random()*energyColors.length)],
    archetype: archetypes[Math.floor(Math.random()*archetypes.length)],
    vision: symbolicVisions[Math.floor(Math.random()*symbolicVisions.length)],
    emotion: detectEmotion(q)
  };
}
function narrative(){ return narrativeLines[Math.floor(Math.random()*narrativeLines.length)]; }
function cegonhaDeepThought(){ return "ğŸ’­ Aqui estÃ¡ um pensamento profundo para vocÃª considerar..."; }

// ==========================
// VERSOS INFINITOS & ÃšNICOS
// ==========================
function generateInfiniteVerse(word){
  const starts = ["Quando penso em", "Nos cantos do vento vive", "Em noites silenciosas surge","Sob o brilho das estrelas desperta","No coraÃ§Ã£o do tempo vibra","Entre sonhos ocultos danÃ§a","Nos ecos do universo canta"];
  const middles = ["um brilho que ninguÃ©m consegue apagar","uma memÃ³ria que respira vida","um toque suave que se entranha na alma","uma forÃ§a que renasce lentamente","uma histÃ³ria que insiste em ser contada"];
  const ends = ["e o mundo parece mais leve.","e tudo encontra um novo significado.","e a alma sorri em silÃªncio.","e nasce um novo caminho.","e tudo volta a florescer."];
  return `${starts[Math.random()*starts.length|0]} ${word}, ${middles[Math.random()*middles.length|0]} ${ends[Math.random()*ends.length|0]}`;
}

function getUniqueVerse(word){
  if(!wordVerses[word]) return null;
  if(!window.verseHistory) window.verseHistory = {};
  if(!window.verseHistory[word]) window.verseHistory[word] = [];
  const options = wordVerses[word].filter(v => !window.verseHistory[word].includes(v));
  let chosen = options.length>0 ? options[Math.random()*options.length|0] : wordVerses[word][Math.random()*wordVerses[word].length|0];
  window.verseHistory[word].push(chosen);
  if(window.verseHistory[word].length>8) window.verseHistory[word].shift();
  return chosen;
}

// ==========================
// GERADOR DE RESPOSTAS
// ==========================
function generateResponse(question){
  const qLower = question.toLowerCase();
  const energy = readEnergy(question);
  const words = qLower.split(/[\s,.!?;:"()]+/g);

  let response = `<b>ğŸ•Šï¸ Cegonha Evolutiva:</b><br><br>`;
  response += narrative() + "<br><br>";
  if(lastQuestion) response += `Recordo quando me falaste sobre â€œ${lastQuestion}â€.<br><br>`;
  response += `Ao ouvir (â€œ<i>${question}</i>â€), senti ${energy.emotion}.<br><br>`;
  response += `Uma luz <b>${energy.color}</b> fluÃ­a atravÃ©s do arquÃ©tipo <b>${energy.archetype}</b> que envolveu as tuas palavras.<br><br>`;
  response += `E visualizei <i>${energy.vision}</i>.<br><br>`;

  if(qLower.includes("faz um verso sobre") || qLower.includes("cria um verso sobre")){
    let target = qLower.replace("faz um verso sobre","").replace("cria um verso sobre","").trim();
    if(!stopwords.includes(target) && target.length>2){
      const auto = generateInfiniteVerse(target);
      if(!wordVerses[target]) wordVerses[target] = [];
      wordVerses[target].push(auto); saveVerseMemory();
      response += `<b>ğŸŒŸ Verso criado:</b> â€œ${auto}â€<br><br>`;
    }
  }

  words.forEach(word=>{
    if(word.length<2) return;
    if(stopwords.includes(word)) return;
    if(wordVerses[word]){
      const unique = getUniqueVerse(word);
      if(unique) response += `<b>âœ¨ Verso para "${word}":</b> â€œ${unique}â€<br><br>`;
    }
  });

  words.forEach(word=>{
    if(word.length<3) return;
    if(stopwords.includes(word)) return;
    if(!wordVerses[word]){
      const learned = generateInfiniteVerse(word);
      wordVerses[word] = [learned]; saveVerseMemory();
      response += `<b>ğŸª¶ Nova palavra aprendida:</b> â€œ${word}â€<br>â€œ${learned}â€<br><br>`;
    }
  });

  response += `ğŸ’– A tua jornada importa.<br><br>` + cegonhaDeepThought();
  lastQuestion = question;
  return response;
}

// ==========================
// CÃ‰REBRO ANIMADO
// ==========================
let nodes = {}; // palavra => {x,y,vx,vy,color}
let storkTarget = null;

function updateBrainNodes(){
  Object.keys(wordVerses).forEach(word=>{
    if(!nodes[word]){
      nodes[word] = {
        x: Math.random()*canvas.width, y: Math.random()*canvas.height,
        vx: (Math.random()-0.5)*0.5, vy: (Math.random()-0.5)*0.5,
        color: energyColors[Math.floor(Math.random()*energyColors.length)]
      };
    }
  });
  if(!storkTarget || Math.random()<0.005){
    const keys = Object.keys(nodes);
    if(keys.length) storkTarget = keys[Math.floor(Math.random()*keys.length)];
  }
}

function drawBrain(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  updateBrainNodes();

  Object.values(nodes).forEach(n=>{
    n.x += n.vx; n.y += n.vy;
    if(n.x<0||n.x>canvas.width) n.vx *= -1;
    if(n.y<0||n.y>canvas.height) n.vy *= -1;
  });

  const words = Object.keys(nodes);
  for(let i=0;i<words.length;i++){
    for(let j=i+1;j<words.length;j++){
      const n1 = nodes[words[i]], n2 = nodes[words[j]];
      const dx = n2.x-n1.x, dy = n2.y-n1.y, dist = Math.sqrt(dx*dx+dy*dy);
      if(dist<200){
        ctx.strokeStyle = `rgba(100,100,255,${0.2+Math.random()*0.3})`;
        ctx.lineWidth = 1+Math.random();
        ctx.beginPath(); ctx.moveTo(n1.x,n1.y); ctx.lineTo(n2.x,n2.y); ctx.stroke();
      }
    }
  }

  Object.keys(nodes).forEach(word=>{
    const n = nodes[word];
    ctx.beginPath();
    ctx.arc(n.x,n.y,6,0,2*Math.PI);
    ctx.fillStyle = n.color;
    ctx.fill();
    ctx.fillStyle = "#000"; ctx.font = "10px Arial"; ctx.fillText(word, n.x+8, n.y+4);
  });

  requestAnimationFrame(drawBrain);
}
drawBrain();

// ==========================
// EVENTOS
// ==========================
askButton.addEventListener("click", ()=>{
  const q = userInput.value.trim();
  if(!q) return;
  responseDiv.innerHTML = generateResponse(q);
  userInput.value = "";
});

const storkResponse = document.getElementById("stork-response");
storkResponse.addEventListener("click", () => {
  const keys = Object.keys(nodes);
  if(keys.length === 0) return;
  const word = keys[Math.floor(Math.random()*keys.length)];
  let verse = getUniqueVerse(word);
  if(!verse){
    verse = generateInfiniteVerse(word);
    wordVerses[word] = [verse];
    saveVerseMemory();
  }
  responseDiv.innerHTML += `<br><b>ğŸ•Šï¸ Cegonha diz sobre "${word}":</b><br>â€œ${verse}â€<br><span class="flowers">ğŸŒ¸ğŸŒ¼ğŸŒºğŸŒ»ğŸŒ¹ğŸŒ·</span>`;
});

// ==========================
// SUPER RACIOCINIO
// ==========================
const superInput = document.getElementById("super-user-input");
const superButton = document.getElementById("super-ask-button");
const superResponseDiv = document.getElementById("super-response");

function superRaciocinio(question){
  const respostaOriginal = generateResponse(question);

  const words = question.toLowerCase().split(/[\s,.!?;:"()]+/g);
  const reflected = words.map(w => {
    if(stopwords.includes(w) || w.length<3) return "";
    return generateInfiniteVerse(w);
  }).filter(v=>v.length>0);

  const reflexao = reflected.length>0 ? reflected.join(" ") : "A Cegonha medita em silÃªncio sobre suas palavrasâ€¦";

  return `<b>ğŸ•Šï¸ Resposta original:</b><br>${respostaOriginal}<br><br>` +
         `<b>ğŸ’­ ReflexÃ£o prÃ³pria da Cegonha:</b><br>${reflexao}`;
}

superButton.addEventListener("click", ()=>{
  const q = superInput.value.trim();
  if(!q) return;
  superResponseDiv.innerHTML = superRaciocinio(q);
  superInput.value = "";
});

// Responsividade do canvas
window.addEventListener("resize", ()=>{
  canvas.width = container.clientWidth;
  canvas.height = container.clientHeight;
});
</script>
</body>
</html>


</div>